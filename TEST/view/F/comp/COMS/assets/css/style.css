
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%;overflow:hidden;font-family:'Inter',sans-serif;background:#050814;color:#f5f6ff}
.light{background:#f8fafc!important;color:#1e293b!important}

/* Galaxy Background */
#galaxyCanvas{position:fixed;inset:0;z-index:-3;pointer-events:none}
.bg-animation{position:fixed;inset:0;z-index:-2;background:radial-gradient(circle at 60% 20%,rgba(90,50,180,.25),transparent 50%),radial-gradient(circle at 20% 80%,rgba(255,80,120,.18),transparent 60%);opacity:.7}
.bg-animation::before{content:"";position:absolute;top:-20%;left:-10%;width:140%;height:70%;background:linear-gradient(120deg,rgba(120,220,255,.25),rgba(190,140,255,.35),transparent 70%);filter:blur(35px);opacity:.55;animation:aurora 18s ease-in-out infinite alternate}
@keyframes aurora{from{transform:translateX(-8%) translateY(0%)}to{transform:translateX(8%) translateY(6%)}}
body.theme-dark #galaxyCanvas,body.theme-dark .bg-animation{display:block!important;opacity:1!important}
body.theme-light #galaxyCanvas,body.theme-light .bg-animation{opacity:.1}

/* Header */
header{position:fixed;top:0;left:0;right:0;padding:16px 32px;background:rgba(5,8,20,.5);backdrop-filter:blur(16px);border-bottom:1px solid rgba(255,255,255,.06);z-index:9999;display:flex;justify-content:space-between;align-items:center}
.light header{background:rgba(255,255,255,.92);border-color:rgba(0,0,0,.1)}
h1{font-size:2rem;font-weight:800;background:linear-gradient(90deg,#ff7f2a,#ff2a7f);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent}

/* Floating Button */
#dm-btn{position:fixed;bottom:30px;right:30px;width:70px;height:70px;background:linear-gradient(135deg,#ff7f2a,#ff2a7f);color:#fff;border-radius:50%;box-shadow:0 0 40px rgba(255,100,80,.9);display:flex;align-items:center;justify-content:center;font-size:34px;cursor:pointer;z-index:9998;transition:.3s}
#dm-btn:hover{transform:scale(1.2)}

/* Popup Messenger */
#dm-popup{position:fixed;bottom:30px;right:30px;width:420px;height:640px;max-height:calc(100vh - 120px);background:rgba(20,25,50,.96);backdrop-filter:blur(26px);border:1px solid rgba(255,255,255,.18);border-radius:24px;box-shadow:0 30px 80px rgba(0,0,0,.7);display:none;flex-direction:column;z-index:9998;overflow:hidden;transition:all .4s}
#dm-popup.show{display:flex}
#dm-popup.maximized{width:calc(100vw - 60px);height:calc(100vh - 140px);max-width:1400px}
#dm-popup.minimized{height:64px;overflow:hidden}

/* Chat Header */
.chat-header{background:linear-gradient(to right,#ff7f2a,#ff2a7f);padding:12px 18px;color:#fff;display:flex;align-items:center;justify-content:space-between;min-height:64px;cursor:move}
.chat-header-left{display:flex;align-items:center;gap:14px}
#popup-avatar{width:44px;height:44px;border-radius:50%;background:linear-gradient(45deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:bold;object-fit:cover;border:2px solid rgba(255,255,255,.5)}
.chat-info h3{font-size:15.5px;font-weight:600;margin:0}
.chat-info p{font-size:12.5px;opacity:.9;margin:0}
.header-btns{display:flex;gap:8px}
.header-btns button{width:36px;height:36px;border-radius:10px;background:rgba(255,255,255,.22);border:none;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px;transition:.2s}
.header-btns button:hover{background:rgba(255,255,255,.38)}
#backBtn{background:none;border:none;color:#fff;font-size:24px;cursor:pointer;padding:0;width:auto;height:auto;display:none}

/* Popup Body */
.popup-body{flex:1;display:flex;overflow:hidden}
.conv-panel,.chat-panel{flex:1;display:none;flex-direction:column}
.conv-panel.show,.chat-panel.show{display:flex}
.conv-panel{background:rgba(10,15,35,.8)}

/* Search & Conversations */
.search{padding:12px;display:flex;gap:8px}
.search input{flex:1;padding:12px 16px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.22);border-radius:14px;color:#fff;outline:none}
.search input::placeholder{color:rgba(255,255,255,.5)}
.new-conv-btn{width:44px;height:44px;border-radius:14px;background:linear-gradient(to right,#ff7f2a,#ff2a7f);border:none;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px;transition:all .2s;box-shadow:0 4px 12px rgba(255,100,80,.4)}
.new-conv-btn:hover{transform:scale(1.1) rotate(90deg);box-shadow:0 6px 20px rgba(255,100,80,.6)}
.conv-list{flex:1;overflow-y:auto;padding:8px 0}
.conv-item{padding:14px 18px;display:flex;gap:14px;align-items:center;cursor:pointer;transition:.25s}
.conv-item:hover,.conv-item.active{background:rgba(255,127,42,.3)}
.conv-item .avatar{width:48px;height:48px;border-radius:50%;background:linear-gradient(45deg,#ff7f2a,#ff2a7f);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:bold;font-size:18px;flex-shrink:0}
.conv-item .name{font-weight:600;color:#fff}

/* New Conversation */
.new-conv-header{padding:16px 18px;display:flex;align-items:center;gap:12px;border-bottom:1px solid rgba(255,255,255,.1)}
.new-conv-header button{background:none;border:none;color:#fff;font-size:24px;cursor:pointer;padding:0;width:32px;height:32px}
.new-conv-header h3{margin:0;font-size:18px;font-weight:600;color:#fff}
.user-search-box{padding:12px;display:flex;gap:8px}
.user-search-box input{flex:1;padding:12px 16px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.22);border-radius:14px;color:#fff;outline:none}
.user-search-box input::placeholder{color:rgba(255,255,255,.5)}
.user-search-box button{width:44px;height:44px;border-radius:14px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.22);color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}
.user-search-box button:hover{background:rgba(255,255,255,.2)}
.search-results{flex:1;overflow-y:auto;padding:0 12px}
.search-hint,.no-results,.error-message{padding:20px;text-align:center;color:rgba(255,255,255,.6);font-size:14px}
.error-message{color:rgba(255,100,100,.8)}
.user-result{padding:12px;display:flex;align-items:center;gap:12px;border-radius:12px;margin-bottom:8px;transition:background .2s;cursor:pointer}
.user-result:hover{background:rgba(255,255,255,.05)}
.user-avatar{width:44px;height:44px;border-radius:50%;background:linear-gradient(45deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:bold;font-size:16px;flex-shrink:0}
.user-info{flex:1;min-width:0}
.user-name{font-weight:600;color:#fff;font-size:14px}
.user-email{font-size:12px;color:rgba(255,255,255,.6);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.btn-select-user{width:36px;height:36px;border-radius:10px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;flex-shrink:0}
.btn-select-user:hover{background:rgba(255,255,255,.15)}
.btn-select-user.selected{background:linear-gradient(to right,#ff7f2a,#ff2a7f);border-color:transparent}
.selected-users{padding:12px;border-top:1px solid rgba(255,255,255,.1);border-bottom:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.02)}
.selected-users h4{margin:0 0 10px 0;font-size:13px;font-weight:600;color:rgba(255,255,255,.7);text-transform:uppercase;letter-spacing:.5px}
.selected-users-list{display:flex;flex-wrap:wrap;gap:8px}
.selected-user-chip{display:flex;align-items:center;gap:8px;padding:6px 10px;background:linear-gradient(135deg,#ff7f2a,#ff2a7f);border-radius:20px;color:#fff;font-size:13px;font-weight:500}
.selected-user-chip span{max-width:120px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.remove-user-btn{background:rgba(255,255,255,.2);border:none;width:20px;height:20px;border-radius:50%;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:10px;transition:all .2s}
.remove-user-btn:hover{background:rgba(255,255,255,.3);transform:scale(1.1)}
.create-conv-footer{padding:12px;background:rgba(0,0,0,.2);border-top:1px solid rgba(255,255,255,.1)}
.conv-options{display:flex;flex-direction:column;gap:10px;margin-bottom:12px}
.checkbox-label{display:flex;align-items:center;gap:12px;color:#fff;font-size:14px;cursor:pointer;user-select:none;padding:12px 16px;background:rgba(255,255,255,.05);border-radius:14px;transition:all .3s}
.checkbox-label:hover{background:rgba(255,255,255,.08)}
.checkbox-label input[type="checkbox"]{appearance:none;-webkit-appearance:none;width:24px;height:24px;cursor:pointer;background:rgba(255,255,255,.1);border:2px solid rgba(255,255,255,.3);border-radius:50%;position:relative;transition:all .3s cubic-bezier(.4,0,.2,1);flex-shrink:0}
.checkbox-label input[type="checkbox"]:hover{border-color:#ff7f2a;box-shadow:0 0 12px rgba(255,127,42,.3)}
.checkbox-label input[type="checkbox"]:checked{background:linear-gradient(135deg,#ff7f2a,#ff2a7f);border-color:transparent;box-shadow:0 0 20px rgba(255,127,42,.5)}
.checkbox-label input[type="checkbox"]:checked::after{content:"âœ“";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) scale(1);color:#fff;font-size:14px;font-weight:bold;animation:checkPop .3s cubic-bezier(.4,0,.2,1)}
@keyframes checkPop{0%{transform:translate(-50%,-50%) scale(0)}50%{transform:translate(-50%,-50%) scale(1.2)}100%{transform:translate(-50%,-50%) scale(1)}}
.conv-options input[type="text"]{width:100%;padding:10px 14px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.22);border-radius:10px;color:#fff;outline:none;font-size:14px}
.conv-options input[type="text"]::placeholder{color:rgba(255,255,255,.5)}
.btn-create-conv{width:100%;padding:12px;background:linear-gradient(to right,#ff7f2a,#ff2a7f);border:none;border-radius:12px;color:#fff;font-weight:600;font-size:15px;cursor:pointer;transition:all .2s;box-shadow:0 4px 15px rgba(255,100,80,.4)}
.btn-create-conv:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 25px rgba(255,100,80,.6)}
.btn-create-conv:disabled{opacity:.5;cursor:not-allowed}

/* Messages */
#messages{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:16px}
.msg{width:100%;padding:0;display:flex;align-items:center;border-radius:20px;position:relative;word-wrap:break-word;animation:fadeIn .3s ease-in;transition:all .3s}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.msg.sent{align-self:flex-end;justify-content:flex-end}
.msg.received{align-self:flex-start;justify-content:flex-start}
.msg.editing{box-shadow:0 0 0 3px rgba(100,180,255,.4);transform:scale(1.02)}
.msg-content{width:100%;max-width:78%;padding:11px 17px;border-radius:20px;flex-shrink:1}
.msg.sent .msg-content{background:linear-gradient(135deg,#ff7f2a,#ff2a7f);color:#fff}
.msg.received .msg-content{background:rgba(255,255,255,.15);color:#fff}
.msg-text{word-break:break-word}
.msg small{display:block;margin-top:6px;opacity:.7;font-size:11px;text-align:right}
.msg.received small{text-align:left}

/* Message Actions */
.msg-actions-wrapper{display:flex;gap:4px;opacity:0;transition:opacity .2s;pointer-events:auto;flex-shrink:0;margin:0 8px}
.msg.sent .msg-actions-wrapper{order:-1}
.msg.received .msg-actions-wrapper{order:1}
.msg:hover .msg-actions-wrapper{opacity:1}
.msg-actions{display:flex;gap:4px}
.msg-action-btn{width:32px;height:32px;border-radius:8px;background:rgba(20,25,50,.95);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:13px;transition:all .2s;box-shadow:0 4px 12px rgba(0,0,0,.3)}
.msg-action-btn:hover{transform:scale(1.15);box-shadow:0 6px 20px rgba(0,0,0,.5)}
.msg-action-btn.edit-btn:hover{background:rgba(100,180,255,.4);border-color:rgba(100,180,255,.6);color:#64b4ff}
.msg-action-btn.delete-btn:hover{background:rgba(255,80,80,.4);border-color:rgba(255,80,80,.6);color:#f50}
.msg-action-btn.react-btn{color:#fbbf24}
.msg-action-btn.react-btn:hover{background:rgba(251,191,36,.2);color:#fcd34d}

/* Edit Banner */
.edit-banner{padding:10px 18px;background:rgba(100,180,255,.15);border-top:1px solid rgba(100,180,255,.3);border-bottom:1px solid rgba(100,180,255,.3);display:none;align-items:center;justify-content:space-between;animation:slideDown .3s ease-out}
@keyframes slideDown{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}
.edit-banner-content{display:flex;align-items:center;gap:10px;color:#64b4ff;font-size:14px;font-weight:500}
.edit-banner-content i{font-size:16px}
.cancel-edit-btn{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:#fff;padding:6px 14px;border-radius:8px;cursor:pointer;font-size:13px;font-weight:500;display:flex;align-items:center;gap:6px;transition:all .2s}
.cancel-edit-btn:hover{background:rgba(255,80,80,.3);border-color:rgba(255,80,80,.5)}

/* Input Bar */
.input-bar{padding:14px;display:flex;gap:12px;background:rgba(0,0,0,.35);border-top:1px solid rgba(255,255,255,.12)}
.input-bar textarea{flex:1;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.22);border-radius:50px;padding:12px 18px;color:#fff;outline:none;resize:none;min-height:50px;max-height:120px;font-family:'Inter',sans-serif;transition:all .3s}
.input-bar textarea::placeholder{color:rgba(255,255,255,.5)}
.input-bar textarea:focus{border-color:#ff7f2a;box-shadow:0 0 20px rgba(255,127,42,.3)}
.input-bar button{width:50px;height:50px;border-radius:50%;background:linear-gradient(to right,#ff7f2a,#ff2a7f);color:#fff;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:20px;transition:.2s;flex-shrink:0}
.input-bar button:hover{transform:scale(1.1)}
#sendBtn:active{transform:scale(.95)}

/* Modals */
.modal{display:none;position:fixed;z-index:10000;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,.7);backdrop-filter:blur(8px);align-items:center;justify-content:center}
.modal.show{display:flex}
.modal-content{background:rgba(20,25,50,.98);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.18);border-radius:20px;width:90%;max-width:500px;box-shadow:0 30px 80px rgba(0,0,0,.8);animation:modalSlideIn .3s ease-out}
@keyframes modalSlideIn{from{opacity:0;transform:translateY(-50px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}
.modal-header{padding:20px 24px;border-bottom:1px solid rgba(255,255,255,.1);display:flex;justify-content:space-between;align-items:center}
.modal-header h3{margin:0;color:#fff;font-size:1.3rem;font-weight:600}
.modal-close{background:none;border:none;color:#fff;font-size:24px;cursor:pointer;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:8px;transition:.2s}
.modal-close:hover{background:rgba(255,255,255,.1)}
.modal-body{padding:24px}
.modal-body p{color:rgba(255,255,255,.85);line-height:1.6;margin:0}
.modal-body textarea{width:100%;min-height:120px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.22);border-radius:12px;color:#fff;padding:14px;font-family:'Inter',sans-serif;font-size:14px;resize:vertical;outline:none}
.modal-body textarea::placeholder{color:rgba(255,255,255,.5)}
.modal-body textarea:focus{border-color:#ff7f2a;box-shadow:0 0 20px rgba(255,127,42,.3)}
.modal-footer{padding:16px 24px;border-top:1px solid rgba(255,255,255,.1);display:flex;gap:12px;justify-content:flex-end}
.modal-footer button{padding:10px 24px;border:none;border-radius:12px;font-weight:600;cursor:pointer;transition:all .2s;font-size:14px}
.btn-primary{background:linear-gradient(to right,#ff7f2a,#ff2a7f);color:#fff;box-shadow:0 4px 15px rgba(255,100,80,.4)}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 6px 25px rgba(255,100,80,.6)}
.btn-secondary{background:rgba(255,255,255,.1);color:#fff;border:1px solid rgba(255,255,255,.2)}
.btn-secondary:hover{background:rgba(255,255,255,.15)}
.btn-danger{background:linear-gradient(to right,#f44,#c00);color:#fff;box-shadow:0 4px 15px rgba(255,68,68,.4)}
.btn-danger:hover{transform:translateY(-2px);box-shadow:0 6px 25px rgba(255,68,68,.6)}

/* Cards & Forms */
.navbar{background:rgba(10,15,40,.7)!important;backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,.1);box-shadow:0 8px 32px rgba(0,0,0,.4)}
.navbar-brand{font-weight:800;background:linear-gradient(90deg,#ffefc0,#ffb27a,#ff7f2a);-webkit-background-clip:text;color:transparent}
.card{background:rgba(20,25,50,.65);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.15);border-radius:20px;box-shadow:0 15px 35px rgba(0,0,0,.5);overflow:hidden}
.card-header{background:rgba(30,35,70,.6);border-bottom:1px solid rgba(255,255,255,.1);padding:1rem 1.5rem;font-weight:600}
.glass-card{background:rgba(30,35,70,.4);backdrop-filter:blur(16px);border:1px solid rgba(255,255,255,.1)}
.form-control,.form-select,textarea{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.22);border-radius:16px;color:#fff;padding:14px 18px;transition:all .3s}
.form-control::placeholder,textarea::placeholder{color:rgba(255,255,255,.5)}
.form-control:focus,textarea:focus{border-color:#ff7f2a;box-shadow:0 0 20px rgba(255,127,42,.4);background:rgba(255,255,255,.12)}

/* Scrollbars */
::-webkit-scrollbar{width:8px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:linear-gradient(#ff7f2a,#ff2a7f);border-radius:10px}
::-webkit-scrollbar-thumb:hover{background:#ff5e00}

/* Theme Toggle */
#themeToggle{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.2rem}

/* Light Mode */
body.theme-light{background:#f0f4ff;color:#1a1a2e}
body.theme-light .card{background:rgba(255,255,255,.85);border:1px solid rgba(0,0,0,.1)}
body.theme-light .message-own{background:linear-gradient(135deg,#667eea,#764ba2)}

/* Reactions */
.msg-reactions{display:flex;flex-wrap:wrap;gap:6px;margin-top:8px}
.reaction-bubble{display:inline-flex;align-items:center;gap:4px;padding:4px 10px;background:rgba(255,255,255,.08);border:1.5px solid rgba(255,255,255,.15);border-radius:12px;cursor:pointer;transition:all .2s;font-size:14px}
.reaction-bubble:hover{background:rgba(255,127,42,.2);border-color:rgba(255,127,42,.4);transform:scale(1.05)}
.reaction-bubble.user-reacted{background:rgba(255,127,42,.25);border-color:#ff7f2a}
.reaction-emoji{font-size:16px;line-height:1}
.reaction-count{font-size:12px;font-weight:600;color:rgba(255,255,255,.9);min-width:12px;text-align:center}
.heart-animation{position:fixed;font-size:60px;pointer-events:none;z-index:100000;transform:translate(-50%,-50%);animation:heartFloat 1s ease-out forwards}
@keyframes heartFloat{0%{opacity:1;transform:translate(-50%,-50%) scale(.5)}50%{opacity:1;transform:translate(-50%,-80px) scale(1.2)}100%{opacity:0;transform:translate(-50%,-120px) scale(.8)}}

/* Reply */
.reply-reference{background:rgba(255,255,255,.05);border-left:3px solid #ff7f2a;padding:8px 12px;margin-bottom:8px;border-radius:8px;cursor:pointer;transition:all .2s}
.reply-reference:hover{background:rgba(255,127,42,.1)}
.reply-reference-header{display:flex;align-items:center;gap:6px;font-size:12px;font-weight:600;color:#ff7f2a;margin-bottom:4px}
.reply-reference-content{font-size:13px;color:rgba(255,255,255,.7);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.msg.sent .reply-reference{background:rgba(255,255,255,.15);border-left-color:rgba(255,255,255,.5)}
.msg.sent .reply-reference-header{color:rgba(255,255,255,.95)}
.msg.sent .reply-reference-content{color:rgba(255,255,255,.8)}
.reply-banner{background:linear-gradient(135deg,rgba(139,92,246,.15),rgba(236,72,153,.15));border-top:2px solid rgba(139,92,246,.4);border-bottom:1px solid rgba(255,255,255,.1);padding:12px 18px;display:none}
.reply-banner.active{display:block;animation:slideDown .3s ease}
.reply-banner-content{display:flex;align-items:flex-start;gap:12px}
.reply-icon{color:#8b5cf6;font-size:18px;margin-top:2px;flex-shrink:0}
.reply-info{flex:1;min-width:0}
.reply-to-user{font-size:13px;font-weight:600;color:#8b5cf6;margin-bottom:4px}
.reply-preview-text{font-size:13px;color:rgba(255,255,255,.7);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.4}
.cancel-reply-btn{background:rgba(255,107,107,.2);border:1px solid rgba(255,107,107,.3);color:#ff6b6b;padding:6px 12px;border-radius:8px;cursor:pointer;font-size:13px;font-weight:500;display:flex;align-items:center;gap:6px;transition:all .2s;flex-shrink:0}
.cancel-reply-btn:hover{background:rgba(255,107,107,.3);transform:scale(1.05)}
.msg.highlight{animation:messageHighlight 1s ease-out}
@keyframes messageHighlight{0%,100%{background:transparent}50%{background:rgba(255,127,42,.3)}}






/* Emoji Picker */
.emoji-picker-full {
    position: absolute;
    top:10%;
    left: 45%;
    transform: translateX(-50%);
    margin-bottom: 10px;
    width: 320px;
    max-height: 300px;
    background: rgba(25, 30, 55, 0.98);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 16px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    z-index: 1000;
    display: flex;
    flex-direction: column;
    animation: emojiPickerSlideUp 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
}



@keyframes emojiPickerSlideUp {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(10px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0) scale(1);
    }
}

.emoji-quick-bar {
    display: flex;
    gap: 4px;
    padding: 12px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    flex-wrap: wrap;
    justify-content: center;
}

.emoji-quick-btn {
    width: 36px;
    height: 36px;
    border: none;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.emoji-quick-btn:hover {
    background: rgba(255, 127, 42, 0.3);
    transform: scale(1.15);
}

.emoji-quick-btn:active {
    transform: scale(0.95);
}

.emoji-tabs {
    display: flex;
    gap: 2px;
    padding: 8px 12px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    overflow-x: auto;
    scrollbar-width: none;
}

.emoji-tabs::-webkit-scrollbar {
    display: none;
}

.emoji-tab {
    padding: 6px 12px;
    border: none;
    background: transparent;
    color: rgba(255, 255, 255, 0.5);
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    cursor: pointer;
    transition: all 0.2s;
    border-radius: 6px;
    white-space: nowrap;
}

.emoji-tab:hover {
    color: rgba(255, 255, 255, 0.8);
    background: rgba(255, 255, 255, 0.05);
}

.emoji-tab.active {
    color: #ff7f2a;
    background: rgba(255, 127, 42, 0.15);
}

.emoji-grid {
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    gap: 4px;
    padding: 12px;
    overflow-y: auto;
    max-height: 150px;

}

.emoji-grid::-webkit-scrollbar {
    width: 6px;
}

.emoji-grid::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
}

.emoji-grid::-webkit-scrollbar-thumb {
    background: rgba(255, 127, 42, 0.3);
    border-radius: 10px;
}

.emoji-grid::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 127, 42, 0.5);
}

.emoji-grid-btn {
    width: 32px;
    height: 32px;
    border: none;
    background: transparent;
    font-size: 22px;
    cursor: pointer;
    transition: all 0.15s;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
}
.emoji-grid-btn:hover {background: rgba(255, 127, 42, 0.2);transform: scale(1.2);}
.emoji-grid-btn:active {transform: scale(0.9);}

/* Dark/Light mode support */
html.light .emoji-picker-full {
    background: rgba(255, 255, 255, 0.98);
    border-color: rgba(0, 0, 0, 0.15);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
}

html.light .emoji-quick-bar,
html.light .emoji-tabs,
html.light .emoji-grid {
    border-color: rgba(0, 0, 0, 0.1);
}

html.light .emoji-quick-btn {
    background: rgba(0, 0, 0, 0.05);
}

html.light .emoji-tab {
    color: rgba(0, 0, 0, 0.5);
}

html.light .emoji-tab.active {
    color: #ff7f2a;
}

html.light .reaction-bubble {
    background: rgba(0, 0, 0, 0.05);
    border-color: rgba(0, 0, 0, 0.15);
}

html.light .reply-reference {
    background: rgba(0, 0, 0, 0.03);
}